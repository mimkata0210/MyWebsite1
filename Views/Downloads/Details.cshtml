@model MyWebsite1.Models.Download
@{
    ViewData["Title"] = "Download Details";
    ViewData["CurrentPage"] = "Downloads";
    bool isImage = Model.FileType?.StartsWith("image/") == true;
}
<div class="downloads-container mx-auto mt-4" style="max-width: 750px;">
    <h2 class="mb-3">@Model.Title</h2>
    <p><strong>Description:</strong> @Model.Description</p>
    <p><strong>Uploaded By:</strong> @Model.UserId</p>
    <p><strong>Date:</strong> @Model.DateCreated.ToString("MMMM dd, yyyy")</p>

    @if (isImage)
    {
        <div class="text-center my-4">
            <img src="data:@Model.FileType;base64,@Convert.ToBase64String(Model.FileData)"
                 alt="preview" class="img-fluid rounded shadow" style="max-height: 500px;" />
        </div>
    }

    <div class="d-grid gap-2 my-3">
        <a asp-action="Download" asp-route-id="@Model.Id" class="btn btn-primary btn-lg">
            <i class="fas fa-download me-2"></i> Download
        </a>
    </div>

    @if (Model.UserId == User.Identity.Name)
    {
        <form asp-action="Delete" asp-route-id="@Model.Id" method="post"
              onsubmit="return confirm('Are you sure you want to delete this file?');" class="mb-3">
            <button type="submit" class="btn btn-outline-pink w-100">
                <i class="fas fa-trash-alt me-2"></i> Delete
            </button>
        </form>
    }

    <a asp-action="Index" class="btn btn-secondary w-100">
        <i class="fas fa-arrow-left me-2"></i> Back to List
    </a>
</div>
